# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# Specifies the build and run commands for the Next.js application.
build:
  run:
    - npm i && npm run build
  env:
    # Environment variables available during build and runtime
    - variable: GOOGLE_GENAI_API_KEY
      secret: GOOGLE_GENAI_API_KEY
      availability:
        - BUILD
        - RUNTIME
    - variable: RESEND_API_KEY
      secret: RESEND_API_KEY
      availability:
        - BUILD
        - RUNTIME

runConfig:
  # Increase this value if you'd like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 1
  # The command to start the Next.js production server.
  args: [ 'npm', 'run', 'start' ]
env:
  - variable: GOOGLE_GENAI_API_KEY
    secret: GOOGLE_GENAI_API_KEY
  - variable: RESEND_API_KEY
    secret: RESEND_API_KEY
